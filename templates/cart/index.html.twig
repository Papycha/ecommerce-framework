{% extends 'base.html.twig' %}

{% block title %}Mon panier - Marsyclebook{% endblock %}

{% block body %}
	<h3 class="mb-4">Mon Panier</h3>
	{% if totalQuantity > 0 %}
		<a href="{{ path('remove_cart') }}" title="Supprimer tous les articles" class="btn btn-outline-danger btn-sm float-right mb-3">
			<i class="bi bi-x"></i>
			Réinitialiser mon panier
		</a>
	{% endif %}

	<div class="table-responsive mb-4">
		<table class="table table-hover">
			<thead>
				<tr>
					<th scope="col">Article</th>
					<th scope="col">Prix (unitaire)</th>
					<th class="text-center" scope="col">Quantité</th>
					<th scope="col">Total</th>
					<th scope="col"></th>
				</tr>
			</thead>
			<tbody>
				{% for item in cart %}
					<tr>
						<td class="align-middle">
							{{ item.product.title }}
						</td>
						<td class="align-middle">{{ (item.product.price / 100)|number_format(2, ',', '.') }} €</td>
						<td class="text-center align-middle">
							<a title="Enlever 1 article" href="{{ path('decrease_item', {id:item.product.id}) }}">
								<i class="bi bi-dash"></i>
							</a>
							{{ item.quantity }}
							<a title="Ajouter 1 article" href="{{ path('add_to_cart', {id:item.product.id}) }}">
								<i class="bi bi-plus"></i>
							</a>
						</td>
						<td class="align-middle">{{ (item.quantity * (item.product.price / 100))|number_format(2, ',', '.') }} €</td>
						<td class="align-middle">
							<a title="Supprimer tous les articles de cette ligne" href="{{ path('remove_cart_item', {id: item.product.id}) }}" class="text-danger" href="">
								<i class="bi bi-trash"></i>
							</a>
						</td>
					</tr>
				{% endfor %}
			</tbody>
			<tfoot>
				<th>Total</th>
				<td></td>
				<td class="text-center">
					<small>x</small>
					{{ totalQuantity }}
				</td>
				<th>{{ (totalPrice / 100)|number_format(2, ',', '.') }} €</th>
			</tfoot>
		</table>
	</div>

	{% if totalQuantity > 0 %}
		<a href="#" class="btn btn-outline-success btn-block mb-3">
			<i class="bi bi-cash"></i>
			Valider mon panier
		</a>
	{% else %}
		<p class="alert alert-warning">
			Votre panier est vide, remplissez-le depuis la page
			<a href="{{ path('index') }}">produits</a>.
		</p>
	{% endif %}
{% endblock %}
